<div class="grid gap-4">
  <h2 class="text-lg font-semibold">Readarr Configuration (Optional)</h2>
  <p class="text-sm text-slate-600">Configure your Readarr instances for automated book downloads. This step is completely optional - you can skip it and configure Readarr later in settings if needed.</p>
  
  <form hx-post="/setup/save" hx-target="#readarr-status" hx-swap="outerHTML" class="grid gap-4">
    <div class="grid md:grid-cols-2 gap-4">
      
      <!-- eBooks Section -->
      <div class="border rounded p-3">
        <h3 class="font-medium mb-3">eBooks Readarr</h3>
        <div class="grid gap-2">
          <input name="ra_ebooks_base" placeholder="Base URL (e.g. https://readarr.example.com)" class="border rounded px-3 py-2 w-full" value="{{.Readarr.Ebooks.BaseURL}}">
          <input name="ra_ebooks_key" placeholder="API Key" type="password" autocomplete="new-password" class="border rounded px-3 py-2 w-full" value="{{.Readarr.Ebooks.APIKey}}">
          <label class="inline-flex items-center gap-2 text-sm">
            <input type="checkbox" name="ra_ebooks_insecure" {{ if .Readarr.Ebooks.InsecureSkipVerify }}checked{{ end }}> Skip TLS verification
          </label>
        </div>
      </div>

      <!-- Audiobooks Section -->
      <div class="border rounded p-3">
        <h3 class="font-medium mb-3">Audiobooks Readarr</h3>
        <div class="grid gap-2">
          <input name="ra_audio_base" placeholder="Base URL (e.g. https://audiobookarr.example.com)" class="border rounded px-3 py-2 w-full" value="{{.Readarr.Audiobooks.BaseURL}}">
          <input name="ra_audio_key" placeholder="API Key" type="password" autocomplete="new-password" class="border rounded px-3 py-2 w-full" value="{{.Readarr.Audiobooks.APIKey}}">
          <label class="inline-flex items-center gap-2 text-sm">
            <input type="checkbox" name="ra_audio_insecure" {{ if .Readarr.Audiobooks.InsecureSkipVerify }}checked{{ end }}> Skip TLS verification
          </label>
        </div>
      </div>

    </div>
    
    <div class="bg-blue-50 border border-blue-200 rounded p-3 text-sm text-blue-700">
      <strong>Note:</strong> You can leave both sections blank and configure Readarr later in the settings page. Scriptorum will work without Readarr for manual book management.
    </div>
    
    <button class="px-4 py-2 rounded-lg bg-royal-600 text-white justify-self-start">Save Configuration</button>
  </form>

  <!-- Test buttons -->
  <div class="grid md:grid-cols-2 gap-4">
    <div class="border rounded p-3">
      <div class="flex items-center gap-2">
        <button class="px-3 py-1.5 rounded-lg bg-royal-50 text-royal-800 ring-1 ring-royal-200 hover:bg-royal-100" hx-get="/setup/test/readarr?tag=ebooks" hx-target="#rebooks-probe" hx-swap="innerHTML">Test eBooks</button>
        <div id="rebooks-probe" class="text-sm text-slate-600">—</div>
      </div>
    </div>
    
    <div class="border rounded p-3">
      <div class="flex items-center gap-2">
        <button class="px-3 py-1.5 rounded-lg bg-royal-50 text-royal-800 ring-1 ring-royal-200 hover:bg-royal-100" hx-get="/setup/test/readarr?tag=audio" hx-target="#raudio-probe" hx-swap="innerHTML">Test Audiobooks</button>
        <div id="raudio-probe" class="text-sm text-slate-600">—</div>
      </div>
    </div>
  </div>

  <div id="readarr-status"></div>
</div>